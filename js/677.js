"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[677],{37721:(t,e,i)=>{i.d(e,{U:()=>s});class s{constructor(t){this.map=new Map,t.forEach((t=>this.map.set(t.state,t.subs)))}renew(t){(this.map.get(t)||[]).forEach((t=>t.renew()))}cancel(t){if(t){(this.map.get(t)||[]).forEach((t=>t.cancel()))}else this.map.forEach((t=>t.forEach((t=>t.cancel()))))}update(t,e){this.map.set(t,e)}}},95512:(t,e,i)=>{i.d(e,{y:()=>a});var s=i(19663);class a extends s.m{constructor(t){super(),this.id="DISABLE_CURSOR_MESH",this.payload={disable:t}}}},20217:(t,e,i)=>{i.d(e,{C:()=>a,h:()=>n});var s=i(19663);class a extends s.m{constructor(t){super(),this.payload=t,this.id="DOLLHOUSE_VERTICAL_LIMITS"}}class n extends s.m{constructor(){super(),this.id="SNAP_DOLLHOUSE_UPPER_LIMIT"}}},38613:(t,e,i)=>{i.d(e,{h:()=>a});var s=i(67294);function a(t,e,i){const[a,n]=(0,s.useState)(null===t?i:t[e]);return(0,s.useEffect)((()=>{if(null===t)return;const i=t.onPropertyChanged(e,(t=>{n(t)}));return()=>i.cancel()}),[t,e,i]),a}},66957:(t,e,i)=>{i.d(e,{RE:()=>s,oE:()=>l,sO:()=>a});var s,a,n=i(34956),c=i(16747),r=i(80978),o=i(10513);!function(t){t[t.WALLS=0]="WALLS",t[t.DOORS=1]="DOORS",t[t.OPENINGS=2]="OPENINGS"}(s||(s={})),function(t){t[t.MOVE=0]="MOVE",t[t.START=1]="START",t[t.END=2]="END"}(a||(a={}));class l extends o.M.State{constructor(){super(...arguments),this.addType=s.WALLS,this.wallType=c.d.SOLID,this.wallOpeningType=r.u.DOOR,this.openingEditState=a.MOVE,this.cursor=n.C.ROOMBOUNDS_DEFAULT}}},65298:(t,e,i)=>{i.d(e,{M:()=>o});var s=i(85893),a=i(66102),n=i(38399),c=i(46391),r=i(56064);function o({room:t,areaEdit:e,locationEdit:i}){const o=(0,a.b)(),l=(0,r.O)(),h=o.t(n.Z.SHOWCASE.ROOMS.ROOM_INFORMATION),d=o.t(n.Z.SHOWCASE.ROOMS.ROOM_AREA),g=o.t(n.Z.SHOWCASE.ROOMS.ROOM_DIMENSIONS),u=o.t(n.Z.SHOWCASE.ROOMS.ROOM_PERIMETER),b=l===c.M.IMPERIAL?"sq ft":"sq m",p=o.t(n.Z.SHOWCASE.ROOMS.QUANTITY_IN_UNITS,{units:b,quantity:t.getArea(l)}),f=t.getMeasurementText(l)||"n/a",O=t.getPerimeterText(l);return(0,s.jsxs)("div",Object.assign({className:"room-size-info"},{children:[(0,s.jsx)("div",Object.assign({className:"room-info-title"},{children:h})),(0,s.jsxs)("div",Object.assign({className:"area-info"},{children:[(0,s.jsxs)("div",Object.assign({className:"area-info-detail "},{children:[(0,s.jsx)("div",Object.assign({className:"p5"},{children:d})),(0,s.jsxs)("div",Object.assign({className:"area"},{children:[(0,s.jsx)("div",Object.assign({className:"h5"},{children:p})),e]}))]})),i,(0,s.jsxs)("div",Object.assign({className:"area-info-detail"},{children:[(0,s.jsx)("div",Object.assign({className:"p5"},{children:g})),(0,s.jsx)("div",Object.assign({className:"h5"},{children:f}))]})),(0,s.jsxs)("div",Object.assign({className:"area-info-detail"},{children:[(0,s.jsx)("div",Object.assign({className:"p5"},{children:u})),(0,s.jsx)("div",Object.assign({className:"h5"},{children:O}))]}))]}))]}))}},16284:(t,e,i)=>{i.d(e,{J1:()=>b,KO:()=>u,NY:()=>g,bN:()=>d,jE:()=>p,ji:()=>f});var s=i(67294);if(984==i.j)var a=i(10513);if(984==i.j)var n=i(45755);var c=i(38613);if(984==i.j)var r=i(51043);if(984==i.j)var o=i(66957);if(984==i.j)var l=i(16747);var h=i(60119);function d(){const t=(0,h.d)();return(null==t?void 0:t.editorState)||null}function g(){const t=d();return(0,c.h)(t,"toolState",a.M.ToolState.CLOSED)}function u(){const t=d();return(0,c.h)(t,"selected",null)}function b(){const t=d();return(0,c.h)(t,"addType",o.RE.WALLS)}function p(){const t=d();return(0,c.h)(t||null,"wallType",l.d.SOLID)}function f(){const t=(0,n.m)(r.Z),[e,i]=(0,s.useState)(t?t.availableUndos():0);return(0,s.useEffect)((()=>{if(!t)return()=>{};const e=t.onChanged((()=>i(t.availableUndos())));return i(t.availableUndos()),()=>e.cancel()}),[t]),e}},9074:(t,e,i)=>{i.d(e,{_:()=>n});var s=i(93405),a=i(32683);function n(){const t=(0,s.F)();return t&&t instanceof a.JJ?t:null}},60119:(t,e,i)=>{i.d(e,{d:()=>n});var s=i(45755),a=i(18544);const n=(0,s.u)(a.e)},93405:(t,e,i)=>{i.d(e,{F:()=>n});var s=i(1358),a=i(16284);function n(){const t=(0,s.S)(),e=(0,a.KO)();return e&&t?t.getEntity(e):null}},55248:(t,e,i)=>{i.d(e,{C:()=>s});var s,a=i(10513);!function(t){const e={[a.M.Events.HoverChange.type]:"hoverState",[a.M.Events.SelectChange.type]:"selectState",[a.M.Events.ValidChange.type]:"validState",[a.M.Events.Move.type]:"mover",[a.M.Events.HighlightAdd.type]:"highlightState",[a.M.Events.HighlightClear.type]:"highlightState",[a.M.Events.DimAdd.type]:"dimState",[a.M.Events.DimClear.type]:"dimState"};t.EditorEntityAdapter=class{constructor(t){this.editor=t,this.bindings=[],this.entities=new Map,this.bindings.push(this.editor.subscribe(a.M.Events.HoverChange,(t=>this.bindTargetedCallback(a.M.Events.HoverChange.type,t))),this.editor.subscribe(a.M.Events.SelectChange,(t=>this.bindTargetedCallback(a.M.Events.SelectChange.type,t))),this.editor.subscribe(a.M.Events.ValidChange,(t=>this.bindTargetedCallback(a.M.Events.ValidChange.type,t))),this.editor.subscribe(a.M.Events.HighlightAdd,(t=>this.bindTargetedCallback(a.M.Events.HighlightAdd.type,t))),this.editor.subscribe(a.M.Events.HighlightClear,(t=>this.bindClearCallback(a.M.Events.HighlightClear.type,t))),this.editor.subscribe(a.M.Events.DimAdd,(t=>this.bindTargetedCallback(a.M.Events.DimAdd.type,t))),this.editor.subscribe(a.M.Events.DimClear,(t=>this.bindClearCallback(a.M.Events.DimClear.type,t))),this.editor.subscribe(a.M.Events.Move,(t=>this.bindMoveCallback(t))))}registerEntity(t,...e){let i=this.entities.get(t);i||(i=[]),i.push(...e),this.entities.set(t,i)}unregisterEntity(t){return this.entities.delete(t)}bindTargetedCallback(t,i){let s=null,n=null;a.M.Events.hasTargetAndPrev(i)?(s=i.target,n=i.previous):a.M.Events.hasTarget(i)&&(s=i.target);const c=e[t];if(!c)throw Error(`implement targetted callback for ${t}`);(this.entities.get(n)||[]).forEach((t=>{c in t&&(t[c].active=!1,t[c].off())})),(this.entities.get(s)||[]).forEach((t=>{c in t&&(t[c].active=!0,t[c].on())}))}bindMoveCallback(t){(this.entities.get(t.target)||[]).forEach((e=>{e.mover&&t.target&&e.mover.onMove(t.target,t.ev)}))}bindClearCallback(t,i){let s=null;const n=e[t];a.M.Events.hasTarget(i)&&(s=i.target),(this.entities.get(s)||[]).forEach((t=>{n in t&&(t[n].active=!1,t[n].off())}))}}}(s||(s={}))},6282:(t,e,i)=>{async function s(t,e){if(await t.transition.promise,!e.canStartTransition()){const t=new Promise((t=>{const i=e.onChanged((()=>{e.canStartTransition()&&(i.cancel(),t())}))}));await t}}i.d(e,{E:()=>s})},67971:(t,e,i)=>{i.d(e,{$7:()=>h,uc:()=>g,N3:()=>l});var s=i(81396),a=i(4679),n=i(59370),c=i(69505),r=i(49827),o=i(67944);var l;(0,a.Dy)({unicodeFontsURL:"https://static.matterport.com/webgl-vendors/unicode-font-resolver/1.0.1/"}),function(t){t.WORLD="world",t.NDC="ndc"}(l||(l={}));class h extends s.Object3D{constructor(t,e=l.WORLD){var i,n,c,r;super(),this.config=t,this.scaleType=e,this.unscaledWidth=0,this.unscaledHeight=0,this.labelTextMaterial=new s.MeshBasicMaterial,this.bindings=[];const o=this.config.background||this.config.backgroundAsCollider;if(o){this.config.backgroundOpacity=void 0!==this.config.backgroundOpacity?this.config.backgroundOpacity:1,this.config.backgroundOpacity=this.config.background?this.config.backgroundOpacity:0;const e=new s.BoxGeometry(1,1,.01),i=new s.MeshBasicMaterial({color:t.backgroundColor,transparent:!0,depthTest:this.config.backgroundOpacity>0&&!t.disableDepth,depthWrite:this.config.backgroundOpacity>0&&!t.disableDepth,opacity:this.config.backgroundOpacity,stencilRef:1,stencilFail:s.KeepStencilOp,stencilZFail:s.KeepStencilOp,stencilZPass:s.ReplaceStencilOp,stencilFunc:s.AlwaysStencilFunc,stencilWrite:!0});this.labelBackgroundMesh=new this.config.backgroundColliderType(e,i),this.labelBackgroundMesh.position.z=-.01,this.labelBackgroundMesh.name="Label Background",this.collider=this.labelBackgroundMesh,this.add(this.labelBackgroundMesh)}const h=this.labelTextMesh=new a.xv;h.material=this.labelTextMaterial,h.name="Label Text",h.text=t.text||"",h.renderOrder=10,h.font=`${null!==(i=t.assetBasePath)&&void 0!==i?i:""}${t.fontPath}`,h.lang=t.lang,h.fontSize=1,h.fontWeight=700,h.anchorX="50%",h.anchorY="50%",h.outlineWidth=t.outline?t.outlineWidth:0,h.maxWidth=t.wordWrapWidth,h.textAlign=t.align,o&&(h.raycast=()=>{}),h.addEventListener("synccomplete",(()=>{var t;const[e,i,s,a]=h.textRenderInfo.visibleBounds;let n=s-e,c=a-i;o&&(n+=this.config.backgroundBorderWidth,c+=this.config.backgroundBorderHeight,this.labelBackgroundMesh.scale.set(n,c,1)),this.unscaledWidth=n,this.unscaledHeight=c,this.aspect=n/Math.max(c,.001),h.position.set((e+s)/-2,(i+a)/-2,0),null===(t=this._onGeomUpdate)||void 0===t||t.call(this)})),this.scaleFactor=null!==(n=t.scale)&&void 0!==n?n:1,this.opacity=null!==(c=t.opacity)&&void 0!==c?c:1,this.setColor(null!==(r=t.color)&&void 0!==r?r:0),this.add(h),h.sync(),this.name="Label Container"}dispose(){this.bindings.forEach((t=>t.cancel())),this.labelTextMesh.dispose()}onGeomUpdate(t){this._onGeomUpdate=t}get text(){return this.config.text}set text(t){this.config.text=t,this.labelTextMesh.text=t,this.labelTextMesh.sync()}get mesh(){return this.labelTextMesh}getUnscaledSize(){return{width:this.unscaledWidth,height:this.unscaledHeight}}get scaleFactor(){return this.config.scale}set scaleFactor(t){this.config.scale=t,this.scale.setScalar(t)}get opacity(){return void 0!==this.config.opacity?this.config.opacity:1}set opacity(t){if(t!==this.config.opacity){this.config.opacity=t;const e=t>0&&!this.config.disableDepth;if(this.config.background){const i=this.labelBackgroundMesh.material;i.opacity=Math.min(this.config.backgroundOpacity||1,t),i.depthWrite=t>.15,i.depthTest=e}const i=this.labelTextMaterial;i.opacity=t,i.depthTest=e,this.visible=t>0}}setColor(t){this.labelTextMaterial.color.set(t)}setRenderLayer(t){this.labelTextMesh.layers.mask=t.mask,this.labelBackgroundMesh&&(this.labelBackgroundMesh.layers.mask=t.mask)}setRenderOrder(t){this.renderOrder=t,this.labelTextMesh.renderOrder=t,this.labelBackgroundMesh&&(this.labelBackgroundMesh.renderOrder=t)}setPosition(t,e=(t=>t)){this.position.copy(e(t))}setOrientation(t,e=0){this.quaternion.copy(t),0!==e&&this.rotateZ(-e*c.Ue)}scaleBillboard(t,e,i,s,a,c,h=d.SCALE_DEFAULT){if(0!==i.elements[15])this.scaleFactor=.2*h*s*(d.ORTHO_IDEAL_HEIGHT/a);else{const g=(0,n.D_)(this.position,t,e,i.asThreeMatrix4()),u=Math.abs(g.x);if(u<1){const e=(0,o.mY)(i,t,this.position,a,h),n=((0,r.uZ)(c,1,2.5)+s)*d.SCALE_ASPECT,g=1+d.SCALE_NDC-u*d.SCALE_NDC-n,b=Math.max(Math.min(1/e*g,3),.001);this.scaleType===l.NDC?this.scaleFactor=b:this.scaleFactor=Math.min(b*d.NDC_MULT,h*d.SCALE_WORLD)}else this.scaleFactor=.001}}}const d={SCALE_DEFAULT:.1,SCALE_WORLD:4,SCALE_NDC:.5,SCALE_ASPECT:.035,DEPTH_WRITE_THRESHOD:.15,ORTHO_IDEAL_HEIGHT:1500,NDC_MULT:1.15};class g{constructor(t){this.currentTextConfig=g.defaultTextConfig,t?this.updateTextStyle(t):this.updateTextStyle(g.defaultTextConfig)}updateTextStyle(t){this.currentTextConfig=Object.assign(Object.assign({},this.currentTextConfig),t)}createLabel(t={text:""}){return new h(Object.assign(Object.assign({},this.currentTextConfig),t))}static makeConfig(t){return Object.assign(Object.assign({},g.defaultTextConfig),t)}}g.defaultTextConfig={text:"",fontPath:"fonts/roboto-700.woff",align:"center",wordWrapWidth:void 0,color:"black",backgroundColor:"white",backgroundBorderWidth:.9,backgroundBorderHeight:.7,background:!0,backgroundAsCollider:!0,backgroundColliderType:s.Mesh,scale:1,outline:!1,outlineWidth:.06}}}]);